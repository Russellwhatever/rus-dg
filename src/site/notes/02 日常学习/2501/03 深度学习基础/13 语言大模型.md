---
{"dg-publish":true,"permalink":"/02/2501/03/13/","noteIcon":"","created":"2025-05-24T17:19","updated":"2025-07-01T13:38"}
---

# 上下文提示
提出问题，在已有示例的情况下，要求大语言模型能够对火星的逃逸速度进行求算：
```python
    system_message = """
    你是一位高中物理老师，请根据公式 v = \sqrt(461381*M/R)，M为星体质量，R为星体半径，用一行式子表求出逃逸速度v。
    """
    
    example1_input = "地球的质量M = 1，半径R = 6378.1，请直接写出它的逃逸速度（单位：km/s）"
    example1_output = "v = 11.2"
    example2_input = "水星的质量M = 0.0553，半径R = 2440，请直接写出它的逃逸速度（单位：km/s）"
    example2_output = "v = 4.3"
    example3_input = "金星的质量M = 0.8150，半径R = 6051.8，请直接写出它的逃逸速度（单位：km/s）"
    example3_output = "v = 10.4"

    PROBLEM = f"%s的质量M = %f，半径R = %f，请直接写出它的逃逸速度（单位：km/s）"%(problem[0], problem[1], problem[2])
```
并获得了答案：
```python
v = 5.0
```
与实际数据相符合。
在优化自己的prompt过程中，我有进行如下更改：
1. 由于本题目为了方便人类理解计算，将星体的质量定义为其相对于地球的质量（即，地球质量M=1），此时常数G的值应该是461381；然而大语言模型会自行修改G为星体质量单位为kg时的值，造成矛盾，并输出错误答案。因此我将原SYETEM_MESSAGE中的公式$v = \sqrt{ \frac{2GM}{R} }$修改，完全删去了G这个字母，并完全使用数字表示，来避免大语言模型自作主张去查询G的值。
2. 即使有示例，大语言模型仍然会输出一大串计算过程。因此我将原“请计算逃逸速度”修改为“请直接写出逃逸速度”，获得了符合要求的答案。
# 思维链
```python
example1_output = "首先计算461381*M/R=72.3。然后计算\sqrt(72.3)= v = 11.2"
```
仅使用一个示例对大语言模型进行要求，即得到了符合要求的结果和正确的答案（5.8）。这和模型（qwen2.5）本身已具有一定的逻辑推理能力有很大关系。
# LangChain
修改代码部分，使用LangChain代码库进行问题解决。详见代码。为避免直接将prompt的各种组成直接放入prompt中造成报错，使用generate方法。使用LangChain的大语言模型输出了5.0这个答案，与正确答案一致。
